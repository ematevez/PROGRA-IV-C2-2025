<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <title>{% block title %}Mi Proyecto Django|{% endblock %}</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css">
    <style>
  body {
    transition: background-color 0.3s, color 0.3s;
  }
  body.light-mode {
    background-color: #f8f9fa;
    color: #212529;
  }
  body.dark-mode {
    background-color: #121212;
    color: #e9ecef;
  }
  .navbar.dark-mode {
    background-color: #1f1f1f !important;
  }
  .card.dark-mode {
    background-color: #2a2a2a;
    color: #fff;
  }
  .btn.dark-mode {
    border-color: #fff;
    color: #fff;
  }
</style>
</head>
<body>
<nav class="navbar navbar-expand-lg navbar-dark bg-dark">
  <div class="container-fluid">
    <a class="navbar-brand" href="/">MiProyecto</a>
    <div>
      <ul class="navbar-nav">
        <button id="toggleTheme" class="btn btn-outline-light ms-3">ðŸŒ™</button>
        <li class="nav-item"><a class="nav-link" href="/app1/lista/">App1</a></li>
        <li class="nav-item"><a class="nav-link" href="/app2/lista/">App2</a></li>
        <li class="nav-item"><a class="nav-link" href="/about/">About Me</a></li>
        {% if user.is_authenticated %}
          <li class="nav-item"><a class="nav-link" href="/accounts/logout/">Salir</a></li>
        {% else %}
          <li class="nav-item"><a class="nav-link" href="/accounts/login/">Ingresar</a></li>
          <li class="nav-item"><a class="nav-link" href="/accounts/register/">Registrarse</a></li>
        {% endif %}
      </ul>
    </div>
  </div>
</nav>
<div class="container mt-4">
{% if messages %}
  <div class="mt-2">
    {% for message in messages %}
      <div class="alert alert-{{ message.tags }} alert-dismissible fade show" role="alert">
        {{ message }}
        <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
      </div>
    {% endfor %}
  </div>
{% endif %}

{% block content %}{% endblock %}
</div>
<script>
  const body = document.body;
  const navbar = document.querySelector("nav");

  // Cargar preferencia del usuario desde localStorage
  if (localStorage.getItem("theme") === "dark") {
    body.classList.add("dark-mode");
    navbar.classList.add("dark-mode");
  } else {
    body.classList.add("light-mode");
  }

  document.getElementById("toggleTheme").addEventListener("click", () => {
    if (body.classList.contains("dark-mode")) {
      body.classList.replace("dark-mode", "light-mode");
      navbar.classList.remove("dark-mode");
      localStorage.setItem("theme", "light");
    } else {
      body.classList.replace("light-mode", "dark-mode");
      navbar.classList.add("dark-mode");
      localStorage.setItem("theme", "dark");
    }
  });
</script>

</body>
</html>
